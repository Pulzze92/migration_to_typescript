(()=>{"use strict";var t,e=function(){return e=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.apply(this,arguments)},o=function(){function t(t,e){void 0===e&&(e={}),this.baseLink=t,this.options=e}return t.prototype.getResp=function(t,e){var o=t.endpoint,n=void 0===o?"":o,r=t.options,c=void 0===r?{}:r;void 0===e&&(e=function(){console.error("No callback for GET response")}),this.load("GET",n,e,c)},t.prototype.errorHandler=function(t){if(!t.ok)throw 401!==t.status&&404!==t.status||console.log("Sorry, but there is ".concat(t.status," error: ").concat(t.statusText)),Error(t.statusText);return t},t.prototype.makeUrl=function(t,o){var n=e(e({},this.options),t),r="".concat(this.baseLink).concat(o,"?");return Object.keys(n).forEach((function(t){r+="".concat(t,"=").concat(n[t],"&")})),r.slice(0,-1)},t.prototype.load=function(t,e,o,n){void 0===n&&(n={}),fetch(this.makeUrl(n,e),{method:t}).then(this.errorHandler).then((function(t){return t.json()})).then((function(t){return o(t)})).catch((function(t){return console.error(t)}))},t}(),n=(t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)},function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)});const r=function(t){function e(){return t.call(this,"https://nodenews.herokuapp.com/",{apiKey:"1a3ec0930ff941f8b71f8eac24c19b8b"})||this}return n(e,t),e}(o);var c=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getSources=function(e){t.prototype.getResp.call(this,{endpoint:"sources"},e)},e.prototype.getNews=function(e,o){for(var n=e.target,r=e.currentTarget;n!==r;){if(n.classList.contains("source__item")){var c=n.getAttribute("data-source-id");return void(r.getAttribute("data-source")!==c&&(r.setAttribute("data-source",c),t.prototype.getResp.call(this,{endpoint:"everything",options:{sources:c}},o)))}n=n.parentNode}},e}(r);var i=function(){function t(){}return t.prototype.draw=function(t){var e=t.length>=10?t.filter((function(t,e){return e<10})):t,o=document.createDocumentFragment(),n=document.querySelector("#newsItemTemp");e.forEach((function(t,e,r){var c=n.content.cloneNode(!0);e%2&&c.querySelector(".news__item").classList.add("alt"),c.querySelector(".news__meta-photo").style.backgroundImage="url(".concat(t.urlToImage||"img/news_placeholder.jpg",")"),c.querySelector(".news__meta-author").textContent=t.author||t.source.name,c.querySelector(".news__meta-date").textContent=t.publishedAt.slice(0,10).split("-").reverse().join("-"),c.querySelector(".news__description-title").textContent=t.title,c.querySelector(".news__description-source").textContent=t.source.name,c.querySelector(".news__description-content").textContent=t.description,c.querySelector(".news__read-more a").setAttribute("href",t.url),o.append(c)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(o)},t}();const s=i,a=function(){function t(){}return t.prototype.draw=function(t){var e=document.createDocumentFragment(),o=document.querySelector("#sourceItemTemp");t.forEach((function(t){var n=o.content.cloneNode(!0);n.querySelector(".source__item-name").textContent=t.name,n.querySelector(".source__item").setAttribute("data-source-id",t.id),e.append(n)})),document.querySelector(".sources").append(e)},t}();var l=function(){function t(){this.news=new s,this.sources=new a}return t.prototype.drawNews=function(t){var e=(null==t?void 0:t.articles)?null==t?void 0:t.articles:[];this.news.draw(e)},t.prototype.drawSources=function(t){var e=(null==t?void 0:t.sources)?null==t?void 0:t.sources:[];this.sources.draw(e)},t}();(new(function(){function t(){this.controller=new u,this.view=new l}return t.prototype.start=function(){var t=this;document.querySelector(".sources").addEventListener("click",(function(e){return t.controller.getNews(e,(function(e){return t.view.drawNews(e)}))})),this.controller.getSources((function(e){return t.view.drawSources(e)}))},t}())).start()})();